<p-card [style]="{'width': '30rem', 'margin-bottom': '2em'}">
  <div class="p-d-flex p-jc-end p-mb-3">
    <button pButton type="button" pTooltip="Delete Token" icon="pi pi-minus" class="p-button-rounded"
      (click)="deleteToken()"></button>
  </div>

  <div *ngFor="let andChunk of token.andChunkList" class="p-mb-3" style="background-color: bisque;">
    <div *ngFor="let orChunk of andChunk.orChunkList" class="p-mb-1">
      <app-token-chunk [token]="token" [typeList]="typeList" [actionList]="actionList"
        (delete)="deleteChunk(orChunk, andChunk)">
      </app-token-chunk>
    </div>
    <div class="p-ml-1">
      <button pButton pTooltip="Add in Or" type="button" icon="pi pi-plus" class="p-button-rounded"
        (click)="addOrChunk(andChunk)"></button>
    </div>
    &nbsp;
  </div>

  <div class="p-d-flex p-jc-between">
    <button pButton pTooltip="Add in And" type="button" icon="pi pi-times" (click)="addAndChunk()"
      class="p-button-rounded"></button>

    <div *ngIf="repeat" class="p-ml-3">
      <label [for]="'repeatIndex_'+ token.uid"
        class="label-size-enlarged">{{'PAGE.VISUAL_QUERY.REPEAT' | translate}}</label>
      <input class="p-mr-1" [id]="'repeatIndex_'+ token.uid" type="number" style="width: 50px;"
        [(ngModel)]="token.repeatIndex">
      <label [for]="'repeatTimes_'+ token.uid"
        class="label-size-enlarged">{{'PAGE.VISUAL_QUERY.FOR' | translate}}</label>
      <input class="p-mr-1" [id]="'repeatTimes_'+ token.uid" type="number" style="width: 50px;"
        [(ngModel)]="token.repeatTimes">
      <label [for]="'repeatTimes_'+ token.uid"
        class="label-size-enlarged">{{'PAGE.VISUAL_QUERY.TIMES' | translate}}</label>
    </div>

    <p-overlayPanel #op>
      <p-listbox [options]="optionList" [(ngModel)]="optionSel" optionLabel="value" [style]="{'width':'15rem'}"
        (click)="setOption()">
        <ng-template let-option pTemplate="item">
          {{'PAGE.VISUAL_QUERY.' + option.label | translate}}
        </ng-template>
      </p-listbox>
    </p-overlayPanel>
    <button *ngIf="option" pButton label=" " (click)="op.toggle($event)"><i
        class="pi pi-bars"></i>&nbsp;{{"PAGE.VISUAL_QUERY.OPTION" | translate}}</button>
  </div>
  <div class="p-d-flex p-jc-end p-mt-1">
    <div *ngFor="let opt of optionsSel, let i = index">
      {{"PAGE.VISUAL_QUERY." + opt | translate}} {{i < (optionsSel.length  -1) ? ', ' : '' }}
    </div>
    <!-- <p-chips [ngModel]="optionsSel" (keydown)="onChange($event)" id="chips"></p-chips> -->
  </div>
</p-card>
