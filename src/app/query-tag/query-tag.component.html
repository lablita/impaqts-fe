<span class="p-component">
  <div class="grid">
    <div class="col-11">
      <div class="grid mb-1" *ngIf="!metadata && typeList">
        <div class="col-8">
          <p-dropdown [options]="typeList" [(ngModel)]="tagName" optionLabel="value" (onChange)="setTagName($event)"
            [placeholder]="'PAGE.VISUAL_QUERY.SEL_TYPE' | translate">
          </p-dropdown>
        </div>
        <div class="col-4 relative">
          <p-dropdown [(ngModel)]="action" (onChange)="setTagAttr($event)" [options]="actionList"
            class="absolute right-0" [placeholder]="'PAGE.VISUAL_QUERY.SEL_ACTION' | translate" optionLabel="value">
            <ng-template pTemplate="selectedItem">
              <div *ngIf="action">
                {{'PAGE.VISUAL_QUERY.' + action.key | translate}}
              </div>
            </ng-template>
            <ng-template let-action pTemplate="item">
              {{'PAGE.VISUAL_QUERY.' + action.value | translate}}
            </ng-template>
          </p-dropdown>
        </div>
      </div>
      <div *ngIf="!metadata && tag" class="grid">
        <div class="col-8">
          <input class="mr-1" [id]="'tag'" type="text" pInputText style="width: 180px;"
            [placeholder]="'PAGE.VISUAL_QUERY.ANY_WORD' | translate" [(ngModel)]="tag.value">
        </div>
        <div class="col-4 relative" pTooltip="Case sensitive(Aa) / insensitive(aa)" tooltip>
          <p-selectButton [options]="caseList" [(ngModel)]="caseSensitive" (onChange)="setMatchCase()"
            class="absolute right-0">
          </p-selectButton>
        </div>
      </div>
      <div class="grid" *ngIf="metadata && tag">
        <div class="col">
          <button pButton label="Select Type" type="button" (click)="op.toggle($event)"></button>
        </div>
        <div class="col flex">{{selectedMetadata}}</div>
      </div>

      <div *ngIf="freeText && tag">
        <input type="text" pInputText style="width: 200px;" [(ngModel)]="tag.value">
      </div>

      <p-overlayPanel #op [showCloseIcon]="true" [style]="{width: '350px'}">
        <ng-template pTemplate>
          <p-scrollPanel [style]="{width: '100%', height: '400px'}" styleClass="custombar">
            <div class="mt-1 ml-3 p-component">
              <div>
                <p-tree [value]="root.tree" selectionMode="single" [(selection)]="root.selection"
                  (onNodeSelect)="selectedNode(root)" class="text-red">
                </p-tree>
              </div>
            </div>
          </p-scrollPanel>

        </ng-template>
      </p-overlayPanel>

    </div>
    <div class="col-1">
      <button pButton pTooltip="Delete Tag" type="button" icon="pi pi-times" class="p-button-rounded delete-tag-button"
        *ngIf="deleteTagOn" (click)="deleteTag($event)"></button>
    </div>
  </div>
</span>